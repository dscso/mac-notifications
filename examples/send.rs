use notifications::*;

fn main() {
    let mut provider = NotificationProvider::new("terminal");

    provider.set_callback(|id, response| {
        println!("notification activated {}: {:?}", id, response);
    });

    let image = String::from("data:image/png;base64,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");
    let id = Notification::new()
        .reply(true)
        .title("title")
        .subtitle("This notification will be deleted in ~5sec... Interact with it before that!")
        .image(image.as_ref())
        .delivery_date(std::time::SystemTime::now() - std::time::Duration::from_secs(100))
        .send()
        .expect("TODO: panic message");

    for _ in 0..50 {
        provider.run_main_loop_once();
    }
    println!("all notifications: {:?}", provider.get_all_notifications());
    println!("deleting old notificaiton...");
    provider.delete(id.as_str());

    println!("all notifications: {:?}", provider.get_all_notifications());
    /*for _ in 0..50 {
        provider.run_main_loop_once();
    }*/
}
